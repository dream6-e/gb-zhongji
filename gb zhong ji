-- 精简版：只有Rayfield自带控制 + 僵尸高亮功能
print("正在加载Rayfield...")

-- 尝试不同的Rayfield链接
local Rayfield
local rayfieldLinks = {
    "https://raw.githubusercontent.com/shlexware/Rayfield/main/source",  -- 官方链接
    "https://sirius.menu/rayfield",  -- 备用链接
    "https://raw.githubusercontent.com/Syntaxx64/Rayfield/main/Rayfield"  -- 另一个备用
}

for i, link in ipairs(rayfieldLinks) do
    print("尝试链接 " .. i .. ": " .. link)
    local success, result = pcall(function()
        return loadstring(game:HttpGet(link))()
    end)
    
    if success then
        Rayfield = result
        print("✅ Rayfield加载成功，来自链接" .. i)
        break
    else
        print("❌ 链接" .. i .. "失败: " .. tostring(result))
    end
end

if not Rayfield then
    print("所有Rayfield链接都失败")
    return
end

-- ===== Rayfield加载成功，创建窗口 =====
print("创建Rayfield窗口...")

local Window = Rayfield:CreateWindow({
    Name = "僵尸高亮系统",
    LoadingTitle = "加载中",
    LoadingSubtitle = "请稍候",
    ConfigurationSaving = {
        Enabled = false
    }
})

-- ===== 获取游戏服务 =====
local Workspace = game:GetService("Workspace")
local Lighting = game:GetService("Lighting")
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local camera = Workspace:WaitForChild("Camera")

-- ===== 系统变量 =====
local systemConfig = {
    -- 高亮系统
    zombieHighlighter = {
        Enabled = true,
        AutoHighlight = true,
        HighlightEffect = true,
        Colors = {
            Torch = Color3.fromRGB(255, 165, 0),      -- 橙色
            Cuirskull = Color3.fromRGB(128, 0, 128),  -- 紫色
            Axe = Color3.fromRGB(255, 0, 0),          -- 红色
            Eye = Color3.fromRGB(0, 200, 255),        -- 青色
            Normal = Color3.fromRGB(0, 170, 0)        -- 绿色
        }
    },
    -- 夜视系统
    nightVision = {
        Enabled = false,
        OriginalOutdoorAmbient = Lighting.OutdoorAmbient,
        NightVisionColor = Color3.fromRGB(255, 255, 255),
        UpdateConnection = nil
    },
    -- 碰撞箱系统
    hitboxSystem = {
        Enabled = false,  -- 碰撞箱开关
        TorsoSize = Vector3.new(2, 2, 1),  -- torso默认大小
        HeadSize = Vector3.new(1, 1, 1),   -- head默认大小
        OriginalSizes = {}  -- 保存原始大小
    }
}

-- ===== 碰撞箱功能 =====
local function applyHitboxToZombie(zombie)
    if not zombie or not zombie:IsA("Model") then return end
    
    -- 保存原始大小（如果还没保存）
    if not systemConfig.hitboxSystem.OriginalSizes[zombie] then
        systemConfig.hitboxSystem.OriginalSizes[zombie] = {}
    end
    
    -- 处理torso
    local torso = zombie:FindFirstChild("torso") or zombie:FindFirstChild("Torso")
    if torso and torso:IsA("BasePart") then
        -- 保存原始大小
        if not systemConfig.hitboxSystem.OriginalSizes[zombie].torso then
            systemConfig.hitboxSystem.OriginalSizes[zombie].torso = torso.Size
        end
        
        -- 应用新大小
        if systemConfig.hitboxSystem.Enabled then
            torso.Size = systemConfig.hitboxSystem.TorsoSize
        else
            -- 恢复原始大小
            local originalSize = systemConfig.hitboxSystem.OriginalSizes[zombie].torso
            if originalSize then
                torso.Size = originalSize
            end
        end
    end
    
    -- 处理head
    local head = zombie:FindFirstChild("head") or zombie:FindFirstChild("Head")
    if head and head:IsA("BasePart") then
        -- 保存原始大小
        if not systemConfig.hitboxSystem.OriginalSizes[zombie].head then
            systemConfig.hitboxSystem.OriginalSizes[zombie].head = head.Size
        end
        
        -- 应用新大小
        if systemConfig.hitboxSystem.Enabled then
            head.Size = systemConfig.hitboxSystem.HeadSize
        else
            -- 恢复原始大小
            local originalSize = systemConfig.hitboxSystem.OriginalSizes[zombie].head
            if originalSize then
                head.Size = originalSize
            end
        end
    end
end

local function applyHitboxToAllZombies()
    for _, zombie in ipairs(camera:GetChildren()) do
        if zombie:IsA("Model") and zombie.Name == "m_Zombie" then
            applyHitboxToZombie(zombie)
        end
    end
end

local function restoreAllHitboxes()
    for zombie, parts in pairs(systemConfig.hitboxSystem.OriginalSizes) do
        if zombie and zombie.Parent then
            -- 恢复torso
            if parts.torso then
                local torso = zombie:FindFirstChild("torso") or zombie:FindFirstChild("Torso")
                if torso and torso:IsA("BasePart") then
                    torso.Size = parts.torso
                end
            end
            
            -- 恢复head
            if parts.head then
                local head = zombie:FindFirstChild("head") or zombie:FindFirstChild("Head")
                if head and head:IsA("BasePart") then
                    head.Size = parts.head
                end
            end
        end
    end
end

-- ===== 夜视功能 =====
local function updateNightVision()
    if systemConfig.nightVision.Enabled then
        Lighting.OutdoorAmbient = systemConfig.nightVision.NightVisionColor
    else
        Lighting.OutdoorAmbient = systemConfig.nightVision.OriginalOutdoorAmbient
    end
end

local function startNightVisionUpdater()
    if systemConfig.nightVision.UpdateConnection then
        systemConfig.nightVision.UpdateConnection:Disconnect()
    end
    
    systemConfig.nightVision.UpdateConnection = RunService.Heartbeat:Connect(function()
        if systemConfig.nightVision.Enabled then
            Lighting.OutdoorAmbient = systemConfig.nightVision.NightVisionColor
        end
    end)
end

-- ===== 僵尸高亮功能 =====
local function processZombie(zombie)
    if not systemConfig.zombieHighlighter.Enabled then return end
    
    local function hasComponent(name)
        if zombie:FindFirstChild(name) then return true end
        for _, d in ipairs(zombie:GetDescendants()) do
            if d.Name == name then return true end
        end
        return false
    end
    
    local color
    local hasTorch = hasComponent("Torch")
    local hasCuirskull = hasComponent("Cuirskull")
    local hasEye = hasComponent("Eye")
    local hasAxe = hasComponent("Axe")
    
    if hasTorch then
        color = systemConfig.zombieHighlighter.Colors.Torch
    elseif hasCuirskull then
        color = systemConfig.zombieHighlighter.Colors.Cuirskull
    elseif hasEye and hasAxe then
        color = systemConfig.zombieHighlighter.Colors.Axe
    elseif hasEye then
        color = systemConfig.zombieHighlighter.Colors.Eye
    else
        color = systemConfig.zombieHighlighter.Colors.Normal
    end
    
    local hl = zombie:FindFirstChild("Highlight")
    
    if systemConfig.zombieHighlighter.HighlightEffect then
        if hl then
            hl.FillColor = color
            hl.OutlineColor = color
            hl.Enabled = true
        else
            hl = Instance.new("Highlight")
            hl.Name = "Highlight"
            hl.Adornee = zombie
            hl.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
            hl.FillColor = color
   hl.FillTransparency = 0.5
            hl.OutlineColor = color
            hl.OutlineTransparency = 0
            hl.Parent = zombie
        end
    else
        if hl then
            hl.Enabled = false
        end
    end
    
    -- 同时应用碰撞箱
    applyHitboxToZombie(zombie)
end

local function initializeZombies()
    for _, z in ipairs(camera:GetChildren()) do
        if z:IsA("Model") and z.Name == "m_Zombie" then
            processZombie(z)
        end
    end
end

local function removeAllHighlights()
    for _, z in ipairs(camera:GetChildren()) do
        if z:IsA("Model") and z.Name == "m_Zombie" then
            local hl = z:FindFirstChild("Highlight")
            if hl then hl:Destroy() end
        end
    end
end

local function toggleHighlightEffects(enabled)
    for _, z in ipairs(camera:GetChildren()) do
        if z:IsA("Model") and z.Name == "m_Zombie" then
            local hl = z:FindFirstChild("Highlight")
            if hl then
                hl.Enabled = enabled
            end
        end
    end
end

camera.ChildAdded:Connect(function(z)
    if z:IsA("Model") and z.Name == "m_Zombie" and systemConfig.zombieHighlighter.AutoHighlight then
        task.wait(0.2)
        processZombie(z)
    end
end)

initializeZombies()

-- 创建标签页
local MainTab = Window:CreateTab("主要控制", 4483362458)
local HighlightTab = Window:CreateTab("高亮", 4483362458)
local NightVisionTab = Window:CreateTab("夜视", 4483362458)
local HitboxTab = Window:CreateTab("僵尸碰撞箱", 4483362458)  -- 新增：碰撞箱标签页
local SettingsTab = Window:CreateTab("颜色设置", 4483362458)

-- ===== 主要控制 =====
MainTab:CreateToggle({
    Name = "启用僵尸高亮",
    CurrentValue = systemConfig.zombieHighlighter.Enabled,
    Callback = function(value)
        systemConfig.zombieHighlighter.Enabled = value
        if value then
            initializeZombies()
            Rayfield:Notify({
                Title = "系统开启",
                Content = "僵尸高亮已启用",
                Duration = 2
            })
        else
            removeAllHighlights()
            Rayfield:Notify({
                Title = "系统关闭",
                Content = "僵尸高亮已禁用",
                Duration = 2
            })
        end
    end
})

MainTab:CreateToggle({
    Name = "自动高亮新僵尸",
    CurrentValue = systemConfig.zombieHighlighter.AutoHighlight,
    Callback = function(value)
        systemConfig.zombieHighlighter.AutoHighlight = value
    end
})

MainTab:CreateButton({
    Name = "立即高亮所有僵尸",
    Callback = function()
        initializeZombies()
        Rayfield:Notify({
            Title = "操作完成",
            Content = "已更新所有僵尸高亮",
            Duration = 2
        })
    end
})
-- ===== 高亮标签页 =====
HighlightTab:CreateSection("高亮效果控制")

HighlightTab:CreateToggle({
    Name = "开启高亮效果",
    CurrentValue = systemConfig.zombieHighlighter.HighlightEffect,
    Callback = function(value)
        systemConfig.zombieHighlighter.HighlightEffect = value
        if value then
            toggleHighlightEffects(true)
            Rayfield:Notify({
                Title = "高亮效果",
                Content = "高亮效果已开启",
                Duration = 2
            })
        else
            toggleHighlightEffects(false)
            Rayfield:Notify({
                Title = "高亮效果",
                Content = "高亮效果已关闭",
                Duration = 2
            })
        end
    end
})

HighlightTab:CreateSlider({
    Name = "填充透明度",
    Range = {0, 1},
    Increment = 0.05,
    Suffix = "",
    CurrentValue = 0.5,
    Callback = function(value)
        for _, z in ipairs(camera:GetChildren()) do
            if z:IsA("Model") and z.Name == "m_Zombie" then
                local hl = z:FindFirstChild("Highlight")
                if hl then
                    hl.FillTransparency = value
                end
            end
        end
    end
})

HighlightTab:CreateSlider({
    Name = "轮廓透明度",
    Range = {0, 1},
    Increment = 0.05,
    Suffix = "",
    CurrentValue = 0,
    Callback = function(value)
        for _, z in ipairs(camera:GetChildren()) do
            if z:IsA("Model") and z.Name == "m_Zombie" then
                local hl = z:FindFirstChild("Highlight")
                if hl then
                    hl.OutlineTransparency = value
                end
            end
        end
    end
})

HighlightTab:CreateDropdown({
    Name = "深度模式",
    Options = {"总是最前", "遮挡", "总是最后"},
    CurrentOption = "总是最前",
    Flag = "DepthMode",
    Callback = function(option)
        local depthMode
        if option == "总是最前" then
            depthMode = Enum.HighlightDepthMode.AlwaysOnTop
        elseif option == "遮挡" then
            depthMode = Enum.HighlightDepthMode.Occluded
        else
            depthMode = Enum.HighlightDepthMode.AlwaysBehind
        end
        
        for _, z in ipairs(camera:GetChildren()) do
            if z:IsA("Model") and z.Name == "m_Zombie" then
                local hl = z:FindFirstChild("Highlight")
                if hl then
                    hl.DepthMode = depthMode
                end
            end
        end
    end
})

HighlightTab:CreateButton({
    Name = "重置高亮设置",
    Callback = function()
        for _, z in ipairs(camera:GetChildren()) do
            if z:IsA("Model") and z.Name == "m_Zombie" then
                local hl = z:FindFirstChild("Highlight")
                if hl then
                    hl.FillTransparency = 0.5
                    hl.OutlineTransparency = 0
                    hl.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
                end
            end
        end
        
        Rayfield:Notify({
            Title = "重置完成",
            Content = "高亮设置已恢复默认",
            Duration = 2
        })
    end
})
-- ===== 夜视标签页 =====
NightVisionTab:CreateSection("夜视效果")

NightVisionTab:CreateToggle({
    Name = "开启夜视模式",
    CurrentValue = systemConfig.nightVision.Enabled,
    Callback = function(value)
        systemConfig.nightVision.Enabled = value
        
        if value then
            systemConfig.nightVision.OriginalOutdoorAmbient = Lighting.OutdoorAmbient
            updateNightVision()
            startNightVisionUpdater()
            
            Rayfield:Notify({
                Title = "夜视模式",
                Content = "夜视模式已开启",
                Duration = 2
            })
        else
            if systemConfig.nightVision.UpdateConnection then
                systemConfig.nightVision.UpdateConnection:Disconnect()
                systemConfig.nightVision.UpdateConnection = nil
            end
            updateNightVision()
            
            Rayfield:Notify({
                Title = "夜视模式",
                Content = "夜视模式已关闭",
                Duration = 2
            })
        end
    end
})

NightVisionTab:CreateColorPicker({
    Name = "夜视颜色",
    Color = systemConfig.nightVision.NightVisionColor,
    Callback = function(color)
        systemConfig.nightVision.NightVisionColor = color
        if systemConfig.nightVision.Enabled then
            updateNightVision()
        end
    end
})

NightVisionTab:CreateSlider({
    Name = "夜视亮度",
    Range = {0, 255},
    Increment = 5,
    Suffix = "",
    CurrentValue = 255,
    Callback = function(value)
        local brightness = value / 255
        systemConfig.nightVision.NightVisionColor = Color3.fromRGB(value, value, value)
        if systemConfig.nightVision.Enabled then
            updateNightVision()
        end
    end
})

NightVisionTab:CreateLabel("当前环境光颜色:")
local currentColorLabel = NightVisionTab:CreateLabel(
    string.format("R: %.2f, G: %.2f, B: %.2f", 
        Lighting.OutdoorAmbient.R * 255,
        Lighting.OutdoorAmbient.G * 255,
        Lighting.OutdoorAmbient.B * 255
    )
)

spawn(function()
    while true do
        task.wait(1)
        local text
        if systemConfig.nightVision.Enabled then
            text = string.format("夜视中: R: %.0f, G: %.0f, B: %.0f",
                systemConfig.nightVision.NightVisionColor.R * 255,
                systemConfig.nightVision.NightVisionColor.G * 255,
                systemConfig.nightVision.NightVisionColor.B * 255
            )
        else
            text = string.format("原始: R: %.2f, G: %.2f, B: %.2f",
                Lighting.OutdoorAmbient.R * 255,
                Lighting.OutdoorAmbient.G * 255,
                Lighting.OutdoorAmbient.B * 255
            )
        end
        currentColorLabel.Text = text
    end
end)

NightVisionTab:CreateButton({
    Name = "重置夜视设置",
    Callback = function()
        if systemConfig.nightVision.Enabled then
            systemConfig.nightVision.Enabled = false
            if systemConfig.nightVision.UpdateConnection then
                systemConfig.nightVision.UpdateConnection:Disconnect()
                systemConfig.nightVision.UpdateConnection = nil
            end
            updateNightVision()
        end
        
        systemConfig.nightVision.NightVisionColor = Color3.fromRGB(255, 255, 255)
        currentColorLabel.Text = string.format("R: %.2f, G: %.2f, B: %.2f", 
            Lighting.OutdoorAmbient.R * 255,
            Lighting.OutdoorAmbient.G * 255,
            Lighting.OutdoorAmbient.B * 255
        )
        
        Rayfield:Notify({
            Title = "夜视重置",
            Content = "夜视设置已恢复默认",
            Duration = 2
        })
    end
})

NightVisionTab:CreateParagraph({
    Title = "夜视模式说明",
    Content = "开启夜视模式会将OutdoorAmbient环境光设置为指定颜色，提高夜间可见度。关闭后会恢复原始环境光颜色。"
})
-- ===== 新增：僵尸碰撞箱标签页 =====
HitboxTab:CreateSection("碰撞箱设置")

-- 碰撞箱开关
HitboxTab:CreateToggle({
    Name = "启用碰撞箱调整",
    CurrentValue = systemConfig.hitboxSystem.Enabled,
    Callback = function(value)
        systemConfig.hitboxSystem.Enabled = value
        
        if value then
            applyHitboxToAllZombies()
            Rayfield:Notify({
                Title = "碰撞箱调整",
                Content = "已启用碰撞箱调整",
                Duration = 2
            })
        else
            restoreAllHitboxes()
            Rayfield:Notify({
                Title = "碰撞箱调整",
                Content = "已禁用碰撞箱调整",
                Duration = 2
            })
        end
    end
})

HitboxTab:CreateSection("Torso碰撞箱大小")

-- Torso X轴大小
HitboxTab:CreateSlider({
    Name = "Torso X轴大小",
    Range = {0.1, 10},
    Increment = 0.1,
    Suffix = "",
    CurrentValue = systemConfig.hitboxSystem.TorsoSize.X,
    Callback = function(value)
        systemConfig.hitboxSystem.TorsoSize = Vector3.new(
            value,
            systemConfig.hitboxSystem.TorsoSize.Y,
            systemConfig.hitboxSystem.TorsoSize.Z
        )
        if systemConfig.hitboxSystem.Enabled then
            applyHitboxToAllZombies()
        end
    end
})

-- Torso Y轴大小
HitboxTab:CreateSlider({
    Name = "Torso Y轴大小",
    Range = {0.1, 10},
    Increment = 0.1,
    Suffix = "",
    CurrentValue = systemConfig.hitboxSystem.TorsoSize.Y,
    Callback = function(value)
        systemConfig.hitboxSystem.TorsoSize = Vector3.new(
            systemConfig.hitboxSystem.TorsoSize.X,
            value,
            systemConfig.hitboxSystem.TorsoSize.Z
        )
        if systemConfig.hitboxSystem.Enabled then
            applyHitboxToAllZombies()
        end
    end
})

-- Torso Z轴大小
HitboxTab:CreateSlider({
    Name = "Torso Z轴大小",
    Range = {0.1, 10},
    Increment = 0.1,
    Suffix = "",
    CurrentValue = systemConfig.hitboxSystem.TorsoSize.Z,
    Callback = function(value)
        systemConfig.hitboxSystem.TorsoSize = Vector3.new(
            systemConfig.hitboxSystem.TorsoSize.X,
            systemConfig.hitboxSystem.TorsoSize.Y,
            value
        )
        if systemConfig.hitboxSystem.Enabled then
            applyHitboxToAllZombies()
        end
    end
})

HitboxTab:CreateSection("Head碰撞箱大小")

-- Head X轴大小
HitboxTab:CreateSlider({
    Name = "Head X轴大小",
    Range = {0.1, 5},
    Increment = 0.1,
    Suffix = "",
    CurrentValue = systemConfig.hitboxSystem.HeadSize.X,
    Callback = function(value)
        systemConfig.hitboxSystem.HeadSize = Vector3.new(
            value,
            systemConfig.hitboxSystem.HeadSize.Y,
            systemConfig.hitboxSystem.HeadSize.Z
        )
        if systemConfig.hitboxSystem.Enabled then
            applyHitboxToAllZombies()
        end
    end
})

-- Head Y轴大小
HitboxTab:CreateSlider({
    Name = "Head Y轴大小",
    Range = {0.1, 5},
    Increment = 0.1,
    Suffix = "",
    CurrentValue = systemConfig.hitboxSystem.HeadSize.Y,
    Callback = function(value)
        systemConfig.hitboxSystem.HeadSize = Vector3.new(
            systemConfig.hitboxSystem.HeadSize.X,
            value,
            systemConfig.hitboxSystem.HeadSize.Z
        )
        if systemConfig.hitboxSystem.Enabled then
            applyHitboxToAllZombies()
        end
    end
})

-- Head Z轴大小
HitboxTab:CreateSlider({
    Name = "Head Z轴大小",
    Range = {0.1, 5},
    Increment = 0.1,
    Suffix = "",
    CurrentValue = systemConfig.hitboxSystem.HeadSize.Z,
    Callback = function(value)
        systemConfig.hitboxSystem.HeadSize = Vector3.new(
            systemConfig.hitboxSystem.HeadSize.X,
            systemConfig.hitboxSystem.HeadSize.Y,
            value
        )
        if systemConfig.hitboxSystem.Enabled then
            applyHitboxToAllZombies()
        end
    end
})

-- 当前大小显示
HitboxTab:CreateLabel("当前Torso大小:")
local torsoSizeLabel = HitboxTab:CreateLabel(string.format("X: %.1f, Y: %.1f, Z: %.1f",
    systemConfig.hitboxSystem.TorsoSize.X,
    systemConfig.hitboxSystem.TorsoSize.Y,
    systemConfig.hitboxSystem.TorsoSize.Z
))

HitboxTab:CreateLabel("当前Head大小:")
local headSizeLabel = HitboxTab:CreateLabel(string.format("X: %.1f, Y: %.1f, Z: %.1f",
    systemConfig.hitboxSystem.HeadSize.X,
    systemConfig.hitboxSystem.HeadSize.Y,
    systemConfig.hitboxSystem.HeadSize.Z
))

-- 更新大小显示
spawn(function()
    while true do
        task.wait(0.5)
        torsoSizeLabel.Text = string.format("X: %.1f, Y: %.1f, Z: %.1f",
            systemConfig.hitboxSystem.TorsoSize.X,
            systemConfig.hitboxSystem.TorsoSize.Y,
            systemConfig.hitboxSystem.TorsoSize.Z
        )
        headSizeLabel.Text = string.format("X: %.1f, Y: %.1f, Z: %.1f",
            systemConfig.hitboxSystem.HeadSize.X,
            systemConfig.hitboxSystem.HeadSize.Y,
            systemConfig.hitboxSystem.HeadSize.Z
        )
    end
end)
-- 重置按钮
HitboxTab:CreateButton({
    Name = "重置碰撞箱大小",
    Callback = function()
        systemConfig.hitboxSystem.TorsoSize = Vector3.new(2, 2, 1)
        systemConfig.hitboxSystem.HeadSize = Vector3.new(1, 1, 1)
        
        if systemConfig.hitboxSystem.Enabled then
            applyHitboxToAllZombies()
        end
        
        Rayfield:Notify({
            Title = "碰撞箱重置",
            Content = "碰撞箱大小已恢复默认",
            Duration = 2
        })
    end
})

-- 应用按钮
HitboxTab:CreateButton({
    Name = "立即应用碰撞箱",
    Callback = function()
        applyHitboxToAllZombies()
        Rayfield:Notify({
            Title = "应用完成",
            Content = "碰撞箱大小已应用到所有僵尸",
            Duration = 2
        })
    end
})

-- 恢复按钮
HitboxTab:CreateButton({
    Name = "恢复原始碰撞箱",
    Callback = function()
        restoreAllHitboxes()
        Rayfield:Notify({
            Title = "恢复完成",
            Content = "所有僵尸碰撞箱已恢复原始大小",
            Duration = 2
        })
    end
})

HitboxTab:CreateParagraph({
    Title = "碰撞箱调整说明",
    Content = "调整僵尸的torso和head碰撞箱大小，可以改变命中区域。\n注意：调整后可能会影响游戏平衡性。"
})

-- ===== 颜色设置 =====
SettingsTab:CreateColorPicker({
    Name = "自爆僵尸 (Torch)",
    Color = systemConfig.zombieHighlighter.Colors.Torch,
    Callback = function(color)
        systemConfig.zombieHighlighter.Colors.Torch = color
        initializeZombies()
    end
})

SettingsTab:CreateColorPicker({
    Name = "Cuirskull僵尸",
    Color = systemConfig.zombieHighlighter.Colors.Cuirskull,
    Callback = function(color)
        systemConfig.zombieHighlighter.Colors.Cuirskull = color
        initializeZombies()
    end
})

SettingsTab:CreateColorPicker({
    Name = "斧头僵尸 (Eye+Axe)",
    Color = systemConfig.zombieHighlighter.Colors.Axe,
    Callback = function(color)
        systemConfig.zombieHighlighter.Colors.Axe = color
        initializeZombies()
    end
})

SettingsTab:CreateColorPicker({
    Name = "快速僵尸 (Eye)",
    Color = systemConfig.zombieHighlighter.Colors.Eye,
    Callback = function(color)
        systemConfig.zombieHighlighter.Colors.Eye = color
        initializeZombies()
    end
})

SettingsTab:CreateColorPicker({
    Name = "普通僵尸",
    Color = systemConfig.zombieHighlighter.Colors.Normal,
    Callback = function(color)
        systemConfig.zombieHighlighter.Colors.Normal = color
        initializeZombies()
    end
})

SettingsTab:CreateButton({
    Name = "重置为默认颜色",
    Callback = function()
        systemConfig.zombieHighlighter.Colors = {
            Torch = Color3.fromRGB(255, 165, 0),
            Cuirskull = Color3.fromRGB(128, 0, 128),
            Axe = Color3.fromRGB(255, 0, 0),
            Eye = Color3.fromRGB(0, 200, 255),
            Normal = Color3.fromRGB(0, 170, 0)
        }
        initializeZombies()
        Rayfield:Notify({
            Title = "颜色重置",
            Content = "已恢复默认颜色",
            Duration = 2
        })
    end
})

print("✅ 系统启动完成！")
print("使用Rayfield自带按钮控制（屏幕右下角）")

-- 显示通知
Rayfield:Notify({
    Title = "僵尸高亮系统",
    Content = "已启动！新增'僵尸碰撞箱'标签页可调整碰撞箱大小",
    Duration = 5
})
